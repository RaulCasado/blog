---
import { useTranslations } from '../i18n/utils';
const { lang = 'en', allProjects = [] } = Astro.props;
const t = useTranslations(lang);

const availableLanguages = [...new Set(
  allProjects
    .map(project => project.language)
    .filter(lang => lang !== null && lang !== undefined)
)].sort();
---

<div class="filter-project" role="tablist" aria-label="Filter projects by language">
    <button 
        class="filter-link active"
        data-language="all"
        type="button"
    >
        {t('portfolio.filter.all')}
    </button>
    {availableLanguages.map(language => (
        <button 
            class="filter-link"
            data-language={language}
            type="button"
        >
            {language}
        </button>
    ))}
</div>

<style>
    .filter-project {
        display: flex;
        flex-wrap: wrap;
        gap: 10px;
        margin-bottom: 2rem;
    }
    
    .filter-link {
        padding: 8px 16px;
        border: 1px solid hsl(var(--border));
        border-radius: var(--radius);
        background-color: hsl(var(--background));
        color: hsl(var(--foreground));
        font-size: 0.875rem;
        font-weight: 500;
        transition: all 0.2s ease;
        cursor: pointer;
    }
    
    .filter-link:hover {
        background-color: hsl(var(--muted));
        border-color: hsl(var(--primary));
    }
    
    .filter-link.active {
        background-color: hsl(var(--primary));
        color: hsl(var(--primary-foreground));
        border-color: hsl(var(--primary));
    }
</style>